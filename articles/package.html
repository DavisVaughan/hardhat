<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creating Modeling Packages With hardhat • hardhat</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Creating Modeling Packages With hardhat">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hardhat</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/forge.html">Forging data for predictions</a>
    </li>
    <li>
      <a href="../articles/mold.html">Molding data for modeling</a>
    </li>
    <li>
      <a href="../articles/package.html">Creating Modeling Packages With hardhat</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DavisVaughan/hardhat">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Creating Modeling Packages With hardhat</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DavisVaughan/hardhat/blob/master/vignettes/package.Rmd"><code>vignettes/package.Rmd</code></a></small>
      <div class="hidden name"><code>package.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(hardhat)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(tibble)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">iris &lt;-<span class="st"> </span><span class="kw"><a href="https://tibble.tidyverse.org/reference/as_tibble.html">as_tibble</a></span>(iris)</a></code></pre></div>
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The goal of this vignette is to teach you how to use <code><a href="../reference/mold.html">mold()</a></code> and <code><a href="../reference/forge.html">forge()</a></code> in a modeling package. This is the intended use of these functions, even though they can also be called interactively. Creating a new modeling package has two main stages, creating the modeling function, and implementing a predict method. The stages break down like this:</p>
<ul>
<li>
<p>Modeling function</p>
<ul>
<li><p>Create a constructor.</p></li>
<li><p>Create an implementation function.</p></li>
<li><p>Create a standardized wrapper for the constructor and the implementation function.</p></li>
<li><p>Create a user facing function with methods for xy, formula, and recipe interfaces.</p></li>
</ul>
</li>
<li>
<p>Predict method</p>
<ul>
<li><p>Create one or more prediction implementation functions, varying by the <code>"type"</code> of prediction to make.</p></li>
<li><p>Create a standardized wrapper for switching between the prediction implementation functions.</p></li>
<li><p>Create a user facing predict method.</p></li>
</ul>
</li>
</ul>
<p>The end result is a single high level modeling function that has methods for multiple different interfaces, and a corresponding predict method to make predictions using one of these models along with new data.</p>
</div>
<div id="whats-our-model" class="section level2">
<h2 class="hasAnchor">
<a href="#whats-our-model" class="anchor"></a>What’s Our Model?</h2>
<p>We will use the underlying <code><a href="https://www.rdocumentation.org/packages/stats/topics/lm">lm()</a></code> infrastructure, <code><a href="https://www.rdocumentation.org/packages/stats/topics/lmfit">lm.fit()</a></code>, to create our model. Linear regression should be recognizable to many, so we can focus on understanding how <code><a href="../reference/mold.html">mold()</a></code> and <code><a href="../reference/forge.html">forge()</a></code> fit in the picture, rather than understanding how the model works.</p>
<p><code><a href="https://www.rdocumentation.org/packages/stats/topics/lmfit">lm.fit()</a></code> takes <code>x</code> and <code>y</code> directly, rather than using the formula method. It will serve as the core part of our modeling implementation function, and generally it is easiest if the implementation function takes <code>x</code> and <code>y</code> in this manner.</p>
<p>We will call our model <code>simple_lm()</code> because it won’t have all the features of normal linear regression (weights, offsets, etc).</p>
</div>
<div id="model-constructor" class="section level2">
<h2 class="hasAnchor">
<a href="#model-constructor" class="anchor"></a>Model Constructor</h2>
<p>The first thing we need is a <em>constructor</em> that creates new objects of our model class. The hardhat function <code><a href="../reference/new_model.html">new_model()</a></code> can help with creating that.</p>
<p>A model constructor should:</p>
<ul>
<li><p>Have the name <code>new_&lt;model-class&gt;()</code>.</p></li>
<li><p>Take the required model elements as named arguments, including a required <code>engine</code>.</p></li>
<li><p>Validate the types of the new elements.</p></li>
<li><p>Pass the named elements on to <code><a href="../reference/new_model.html">new_model()</a></code> along with the <code>"&lt;model-class&gt;"</code>.</p></li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">new_simple_lm &lt;-<span class="st"> </span><span class="cf">function</span>(coefs, coef_names, engine) {</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  <span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/numeric">is.numeric</a></span>(coefs)) {</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/stop">stop</a></span>(<span class="st">"`coefs` should be a numeric vector."</span>, <span class="dt">call. =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb2-7" data-line-number="7">  <span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/character">is.character</a></span>(coef_names)) {</a>
<a class="sourceLine" id="cb2-8" data-line-number="8">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/stop">stop</a></span>(<span class="st">"`coef_names` should be a character vector."</span>, <span class="dt">call. =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb2-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb2-10" data-line-number="10">  </a>
<a class="sourceLine" id="cb2-11" data-line-number="11">  <span class="cf">if</span> (<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(coefs) <span class="op">!=</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/length">length</a></span>(coef_names)) {</a>
<a class="sourceLine" id="cb2-12" data-line-number="12">    <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/stop">stop</a></span>(<span class="st">"`coefs` and `coef_names` must have the same length."</span>)</a>
<a class="sourceLine" id="cb2-13" data-line-number="13">  }</a>
<a class="sourceLine" id="cb2-14" data-line-number="14">  </a>
<a class="sourceLine" id="cb2-15" data-line-number="15">  <span class="kw"><a href="../reference/new_model.html">new_model</a></span>(</a>
<a class="sourceLine" id="cb2-16" data-line-number="16">    <span class="dt">coefs =</span> coefs, </a>
<a class="sourceLine" id="cb2-17" data-line-number="17">    <span class="dt">coef_names =</span> coef_names,</a>
<a class="sourceLine" id="cb2-18" data-line-number="18">    <span class="dt">engine =</span> engine, </a>
<a class="sourceLine" id="cb2-19" data-line-number="19">    <span class="dt">class =</span> <span class="st">"simple_lm"</span></a>
<a class="sourceLine" id="cb2-20" data-line-number="20">  )</a>
<a class="sourceLine" id="cb2-21" data-line-number="21">}</a></code></pre></div>
<p>We can use this to manually generate a model object. This object has a <code>hardhat_model</code> class, which provides a very simple print method. Specifically, it tells you the name of the class at the top, and only prints our your custom elements (i.e. not the <code>engine</code>).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">manual_model &lt;-<span class="st"> </span><span class="kw">new_simple_lm</span>(<span class="dv">1</span>, <span class="st">"my_coef"</span>, <span class="kw"><a href="../reference/default_xy_engine.html">default_xy_engine</a></span>())</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">manual_model</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt; &lt;simple_lm&gt; </span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt; [1] "my_coef"</span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(manual_model)</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt; [1] "coefs"      "coef_names" "engine"</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"></a>
<a class="sourceLine" id="cb3-14" data-line-number="14">manual_model<span class="op">$</span>engine</a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt; XY Engine: </span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt;  </span></a>
<a class="sourceLine" id="cb3-17" data-line-number="17"><span class="co">#&gt; # Predictors: 0 </span></a>
<a class="sourceLine" id="cb3-18" data-line-number="18"><span class="co">#&gt;   # Outcomes: 0 </span></a>
<a class="sourceLine" id="cb3-19" data-line-number="19"><span class="co">#&gt;    Intercept: FALSE</span></a></code></pre></div>
</div>
<div id="model-implementation" class="section level2">
<h2 class="hasAnchor">
<a href="#model-implementation" class="anchor"></a>Model Implementation</h2>
<p>The implementation function is where the hard work is done. I generally recommend naming it <code>&lt;model-class&gt;_impl()</code>. It should accept predictors and outcomes in whatever form is required for the algorithm, run the algorithm, and return a named list of elements that will make up your new model. You might also have arguments for extra options that can be used to tweak the internal algorithm.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">simple_lm_impl &lt;-<span class="st"> </span><span class="cf">function</span>(predictors, outcomes) {</a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  lm_fit &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/lmfit">lm.fit</a></span>(predictors, outcomes)</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  </a>
<a class="sourceLine" id="cb4-4" data-line-number="4">  coefs &lt;-<span class="st"> </span>lm_fit<span class="op">$</span>coefficients</a>
<a class="sourceLine" id="cb4-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb4-6" data-line-number="6">  coef_names &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(coefs)</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  coefs &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/unname">unname</a></span>(coefs)</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">  </a>
<a class="sourceLine" id="cb4-9" data-line-number="9">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/list">list</a></span>(</a>
<a class="sourceLine" id="cb4-10" data-line-number="10">    <span class="dt">coefs =</span> coefs,</a>
<a class="sourceLine" id="cb4-11" data-line-number="11">    <span class="dt">coef_names =</span> coef_names</a>
<a class="sourceLine" id="cb4-12" data-line-number="12">  )</a>
<a class="sourceLine" id="cb4-13" data-line-number="13">}</a></code></pre></div>
<p>This simple linear regression implementation just calls <code><a href="https://www.rdocumentation.org/packages/stats/topics/lmfit">lm.fit()</a></code> with <code>x = predictors</code> and <code>y = outcomes</code>. <code><a href="https://www.rdocumentation.org/packages/stats/topics/lmfit">lm.fit()</a></code> expects a matrix of predictors and a vector of outcomes (for univariate regression). More on that in a moment.</p>
<p>The return value has just enough information to make predictions on new data, the coefficient values.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1">predictors &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">as.matrix</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/subset">subset</a></span>(iris, <span class="dt">select =</span> Sepal.Width))</a>
<a class="sourceLine" id="cb5-2" data-line-number="2">outcomes &lt;-<span class="st"> </span>iris<span class="op">$</span>Sepal.Length</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"></a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="kw">simple_lm_impl</span>(predictors, outcomes)</a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="co">#&gt; [1] 1.869009</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb5-9" data-line-number="9"><span class="co">#&gt; [1] "Sepal.Width"</span></a></code></pre></div>
</div>
<div id="model-wrapper" class="section level2">
<h2 class="hasAnchor">
<a href="#model-wrapper" class="anchor"></a>Model Wrapper</h2>
<p>Now that we have our constructor and out implementation function, we can create a wrapper function that will be used in all of our top level methods (for data frames, formulas, and recipes). It will call the implementation function, and then use that information along with the engine to create a new instance of our model. It should have an argument for the output from a call to <code><a href="../reference/mold.html">mold()</a></code>, here I’ve called that <code>processed</code>. In that object will be the predictors, outcomes, and engine. You might also have arguments for additional options to pass on to the implementation function.</p>
<p>The wrapper should take the standardized predictors and outcomes and convert them to the lower level types that the implementation function requires. The <code>predictors</code> and <code>outcomes</code> that are returned from <code><a href="../reference/mold.html">mold()</a></code> will <em>always</em> be data frames, so in this case we can convert them to matrices and vectors directly for use in the lower level function.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1">simple_lm_wrapper &lt;-<span class="st"> </span><span class="cf">function</span>(processed) {</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  predictors &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">as.matrix</a></span>(processed<span class="op">$</span>predictors)</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  outcomes &lt;-<span class="st"> </span>processed<span class="op">$</span>outcomes[[<span class="dv">1</span>]]</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  fit &lt;-<span class="st"> </span><span class="kw">simple_lm_impl</span>(predictors, outcomes)</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">  </a>
<a class="sourceLine" id="cb6-8" data-line-number="8">  <span class="kw">new_simple_lm</span>(</a>
<a class="sourceLine" id="cb6-9" data-line-number="9">    <span class="dt">coefs =</span> fit<span class="op">$</span>coefs,</a>
<a class="sourceLine" id="cb6-10" data-line-number="10">    <span class="dt">coef_names =</span> fit<span class="op">$</span>coef_names,</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">    <span class="dt">engine =</span> processed<span class="op">$</span>engine</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">  )</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">}</a></code></pre></div>
<p>At this point, we can simulate user input and pass it on to our wrapper to run a model.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="co"># Simulate formula interface</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2">processed_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mold.html">mold</a></span>(Sepal.Width <span class="op">~</span><span class="st"> </span>Sepal.Length <span class="op">+</span><span class="st"> </span>Species, iris)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co"># Simulate xy interface</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5">processed_<span class="dv">2</span> &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mold.html">mold</a></span>(<span class="dt">x =</span> iris[<span class="st">"Sepal.Length"</span>], <span class="dt">y =</span> iris<span class="op">$</span>Sepal.Width)</a>
<a class="sourceLine" id="cb7-6" data-line-number="6"></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="kw">simple_lm_wrapper</span>(processed_<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt; &lt;simple_lm&gt; </span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt; [1] 0.3498801 1.6765001 0.6931116 0.6689898</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt; [1] "Sepal.Length"      "Speciessetosa"     "Speciesversicolor"</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; [4] "Speciesvirginica"</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="kw">simple_lm_wrapper</span>(processed_<span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; &lt;simple_lm&gt; </span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt; [1] 0.5117739</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22"><span class="co">#&gt; [1] "Sepal.Length"</span></a></code></pre></div>
</div>
<div id="user-facing-fitting-function" class="section level2">
<h2 class="hasAnchor">
<a href="#user-facing-fitting-function" class="anchor"></a>User Facing Fitting Function</h2>
<p>With all of the pieces in place, we have everything we need to create our high level modeling interface. This should be a generic function, with methods for data frames, matrices, formulas, and recipes. Each method should call <code><a href="../reference/mold.html">mold()</a></code> with the arguments to standardize things and run the preprocessing, and then pass off to the wrapper function to run the actual model. It is also good practice to provide a default method with a nice error message for unknown types.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co"># Generic</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">simple_lm &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) {</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/UseMethod">UseMethod</a></span>(<span class="st">"simple_lm"</span>)</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="co"># Default</span></a>
<a class="sourceLine" id="cb8-7" data-line-number="7">simple_lm.default &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) {</a>
<a class="sourceLine" id="cb8-8" data-line-number="8">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/stop">stop</a></span>(</a>
<a class="sourceLine" id="cb8-9" data-line-number="9">    <span class="st">"`simple_lm()` is not defined for a '"</span>, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/class">class</a></span>(x)[<span class="dv">1</span>], <span class="st">"'."</span>, </a>
<a class="sourceLine" id="cb8-10" data-line-number="10">    <span class="dt">call. =</span> <span class="ot">FALSE</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11">  )</a>
<a class="sourceLine" id="cb8-12" data-line-number="12">}</a>
<a class="sourceLine" id="cb8-13" data-line-number="13"></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co"># XY method - data frame</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15">simple_lm.data.frame &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, ...) {</a>
<a class="sourceLine" id="cb8-16" data-line-number="16">  processed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mold.html">mold</a></span>(x, y)</a>
<a class="sourceLine" id="cb8-17" data-line-number="17">  <span class="kw">simple_lm_wrapper</span>(processed)</a>
<a class="sourceLine" id="cb8-18" data-line-number="18">}</a>
<a class="sourceLine" id="cb8-19" data-line-number="19"></a>
<a class="sourceLine" id="cb8-20" data-line-number="20"><span class="co"># XY method - matrix</span></a>
<a class="sourceLine" id="cb8-21" data-line-number="21">simple_lm.matrix &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, ...) {</a>
<a class="sourceLine" id="cb8-22" data-line-number="22">  processed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mold.html">mold</a></span>(x, y)</a>
<a class="sourceLine" id="cb8-23" data-line-number="23">  <span class="kw">simple_lm_wrapper</span>(processed)</a>
<a class="sourceLine" id="cb8-24" data-line-number="24">}</a>
<a class="sourceLine" id="cb8-25" data-line-number="25"></a>
<a class="sourceLine" id="cb8-26" data-line-number="26"><span class="co"># Formula method</span></a>
<a class="sourceLine" id="cb8-27" data-line-number="27">simple_lm.formula &lt;-<span class="st"> </span><span class="cf">function</span>(formula, data, ...) {</a>
<a class="sourceLine" id="cb8-28" data-line-number="28">  processed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mold.html">mold</a></span>(formula, data)</a>
<a class="sourceLine" id="cb8-29" data-line-number="29">  <span class="kw">simple_lm_wrapper</span>(processed)</a>
<a class="sourceLine" id="cb8-30" data-line-number="30">}</a>
<a class="sourceLine" id="cb8-31" data-line-number="31"></a>
<a class="sourceLine" id="cb8-32" data-line-number="32"><span class="co"># Recipe method</span></a>
<a class="sourceLine" id="cb8-33" data-line-number="33">simple_lm.recipe &lt;-<span class="st"> </span><span class="cf">function</span>(x, data, ...) {</a>
<a class="sourceLine" id="cb8-34" data-line-number="34">  processed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mold.html">mold</a></span>(x, data)</a>
<a class="sourceLine" id="cb8-35" data-line-number="35">  <span class="kw">simple_lm_wrapper</span>(processed)</a>
<a class="sourceLine" id="cb8-36" data-line-number="36">}</a></code></pre></div>
<p>Let’s give it a try:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">predictors &lt;-<span class="st"> </span>iris[<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"Sepal.Width"</span>, <span class="st">"Petal.Width"</span>)]</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">outcomes_vec &lt;-<span class="st"> </span>iris<span class="op">$</span>Sepal.Length</a>
<a class="sourceLine" id="cb9-3" data-line-number="3">outcomes_df &lt;-<span class="st"> </span>iris[<span class="st">"Sepal.Length"</span>]</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="kw">simple_lm</span>(predictors, outcomes_vec)</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; &lt;simple_lm&gt; </span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; [1] 1.392293 1.282020</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt; [1] "Sepal.Width" "Petal.Width"</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="kw">simple_lm</span>(predictors, outcomes_df)</a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt; &lt;simple_lm&gt; </span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="co">#&gt; [1] 1.392293 1.282020</span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb9-19" data-line-number="19"><span class="co">#&gt; [1] "Sepal.Width" "Petal.Width"</span></a>
<a class="sourceLine" id="cb9-20" data-line-number="20"></a>
<a class="sourceLine" id="cb9-21" data-line-number="21"><span class="kw">simple_lm</span>(Sepal.Length <span class="op">~</span><span class="st"> </span>Sepal.Width <span class="op">+</span><span class="st"> </span>Petal.Width, iris)</a>
<a class="sourceLine" id="cb9-22" data-line-number="22"><span class="co">#&gt; &lt;simple_lm&gt; </span></a>
<a class="sourceLine" id="cb9-23" data-line-number="23"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb9-24" data-line-number="24"><span class="co">#&gt; [1] 1.392293 1.282020</span></a>
<a class="sourceLine" id="cb9-25" data-line-number="25"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-26" data-line-number="26"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb9-27" data-line-number="27"><span class="co">#&gt; [1] "Sepal.Width" "Petal.Width"</span></a></code></pre></div>
<p>We can use preprocessing as well, and it is handled by <code><a href="../reference/mold.html">mold()</a></code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(recipes)</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co"># - Log a predictor</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co"># - Generate dummy variables for factors</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="kw">simple_lm</span>(Sepal.Length <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Log">log</a></span>(Sepal.Width) <span class="op">+</span><span class="st"> </span>Species, iris)</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt; &lt;simple_lm&gt; </span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt; [1] 2.406662 2.055780 3.499779 3.978746</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt; [1] "log(Sepal.Width)"  "Speciessetosa"     "Speciesversicolor"</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="co">#&gt; [4] "Speciesvirginica"</span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co"># Same, but with a recipe</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15">rec &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/recipes/topics/recipe">recipe</a></span>(Sepal.Length <span class="op">~</span><span class="st"> </span>Sepal.Width <span class="op">+</span><span class="st"> </span>Species, iris) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/recipes/topics/step_log">step_log</a></span>(Sepal.Width) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/recipes/topics/step_dummy">step_dummy</a></span>(Species, <span class="dt">one_hot =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb10-18" data-line-number="18"></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="kw">simple_lm</span>(rec, iris)</a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="co">#&gt; &lt;simple_lm&gt; </span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb10-22" data-line-number="22"><span class="co">#&gt; [1] 2.406662 2.055780 3.499779 3.978746</span></a>
<a class="sourceLine" id="cb10-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-24" data-line-number="24"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb10-25" data-line-number="25"><span class="co">#&gt; [1] "Sepal.Width"        "Species_setosa"     "Species_versicolor"</span></a>
<a class="sourceLine" id="cb10-26" data-line-number="26"><span class="co">#&gt; [4] "Species_virginica"</span></a></code></pre></div>
</div>
<div id="adding-an-intercept-option" class="section level2">
<h2 class="hasAnchor">
<a href="#adding-an-intercept-option" class="anchor"></a>Adding an Intercept Option</h2>
<p>You might have noticed that our linear regression isn’t adding an intercept. Generally, with linear regression models we will want a default intercept added on. To accomplish this, we can add an <code>intercept</code> argument to our user facing function, and then tweak the engine that would otherwise be created for you automatically.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">simple_lm &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) {</a>
<a class="sourceLine" id="cb11-2" data-line-number="2">  <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/UseMethod">UseMethod</a></span>(<span class="st">"simple_lm"</span>)</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"></a>
<a class="sourceLine" id="cb11-5" data-line-number="5">simple_lm.data.frame &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, <span class="dt">intercept =</span> <span class="ot">TRUE</span>, ...) {</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">  engine &lt;-<span class="st"> </span><span class="kw"><a href="../reference/default_xy_engine.html">default_xy_engine</a></span>(<span class="dt">intercept =</span> intercept)</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">  processed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mold.html">mold</a></span>(x, y, <span class="dt">engine =</span> engine)</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">  <span class="kw">simple_lm_wrapper</span>(processed)</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb11-10" data-line-number="10"></a>
<a class="sourceLine" id="cb11-11" data-line-number="11">simple_lm.matrix &lt;-<span class="st"> </span><span class="cf">function</span>(x, y, <span class="dt">intercept =</span> <span class="ot">TRUE</span>,...) {</a>
<a class="sourceLine" id="cb11-12" data-line-number="12">  engine &lt;-<span class="st"> </span><span class="kw"><a href="../reference/default_xy_engine.html">default_xy_engine</a></span>(<span class="dt">intercept =</span> intercept)</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">  processed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mold.html">mold</a></span>(x, y, <span class="dt">engine =</span> engine)</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">  <span class="kw">simple_lm_wrapper</span>(processed)</a>
<a class="sourceLine" id="cb11-15" data-line-number="15">}</a>
<a class="sourceLine" id="cb11-16" data-line-number="16"></a>
<a class="sourceLine" id="cb11-17" data-line-number="17">simple_lm.formula &lt;-<span class="st"> </span><span class="cf">function</span>(formula, data, <span class="dt">intercept =</span> <span class="ot">TRUE</span>, ...) {</a>
<a class="sourceLine" id="cb11-18" data-line-number="18">  engine &lt;-<span class="st"> </span><span class="kw"><a href="../reference/default_formula_engine.html">default_formula_engine</a></span>(<span class="dt">intercept =</span> intercept)</a>
<a class="sourceLine" id="cb11-19" data-line-number="19">  processed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mold.html">mold</a></span>(formula, data, <span class="dt">engine =</span> engine)</a>
<a class="sourceLine" id="cb11-20" data-line-number="20">  <span class="kw">simple_lm_wrapper</span>(processed)</a>
<a class="sourceLine" id="cb11-21" data-line-number="21">}</a>
<a class="sourceLine" id="cb11-22" data-line-number="22"></a>
<a class="sourceLine" id="cb11-23" data-line-number="23">simple_lm.recipe &lt;-<span class="st"> </span><span class="cf">function</span>(x, data, <span class="dt">intercept =</span> <span class="ot">TRUE</span>, ...) {</a>
<a class="sourceLine" id="cb11-24" data-line-number="24">  engine &lt;-<span class="st"> </span><span class="kw"><a href="../reference/default_recipe_engine.html">default_recipe_engine</a></span>(<span class="dt">intercept =</span> intercept)</a>
<a class="sourceLine" id="cb11-25" data-line-number="25">  processed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mold.html">mold</a></span>(x, data, <span class="dt">engine =</span> engine)</a>
<a class="sourceLine" id="cb11-26" data-line-number="26">  <span class="kw">simple_lm_wrapper</span>(processed)</a>
<a class="sourceLine" id="cb11-27" data-line-number="27">}</a></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="co"># By default an intercept is included</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">simple_lm</span>(predictors, outcomes_df)</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; &lt;simple_lm&gt; </span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt; [1] 3.4573334 0.3990708 0.9721296</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; [1] "(Intercept)" "Sepal.Width" "Petal.Width"</span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co"># But the user can turn this off</span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="kw">simple_lm</span>(Sepal.Length <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Log">log</a></span>(Sepal.Width) <span class="op">+</span><span class="st"> </span>Species, iris, <span class="dt">intercept =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt; &lt;simple_lm&gt; </span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt; $coefs</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt; [1] 2.406662 2.055780 3.499779 3.978746</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt; $coef_names</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt; [1] "log(Sepal.Width)"  "Speciessetosa"     "Speciesversicolor"</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="co">#&gt; [4] "Speciesvirginica"</span></a></code></pre></div>
</div>
<div id="prediction-implementation-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#prediction-implementation-functions" class="anchor"></a>Prediction Implementation Functions</h2>
<p>On the prediction side, we need “implementation” functions like with fitting our model. These vary based on the <code>"type"</code> argument to <code><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict()</a></code>. The <code>"type"</code> might be <code>"response"</code> for numeric predictions as we will use here, or it could be <code>"class"</code> for hard class predictions, <code>"prob"</code> for class probabilities, and more. A set of recommended names for <code>"type"</code> can be found in the <a href="https://tidymodels.github.io/model-implementation-principles/model-predictions.html#input-data">Model Predictions</a> section of the implementation principles.</p>
<p>For our model, we will focus on only returning numeric predictions. I generally like to name these prediciton implementation functions <code>predict_&lt;model-class&gt;_&lt;type&gt;()</code>. The arguments should be the model object, and the predictors in the form that your prediction implementation expects them (here, a matrix).</p>
<p>Also used here is another hardhat function for standardizing prediction output, <code><a href="../reference/spruce.html">spruce_response()</a></code>. This function tidies up the response output, and automatically standardizes it to match the recommendations in the principles guide. The output is always a tibble, and for the response type it has 1 column, <code>.pred</code>.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">predict_simple_lm_response &lt;-<span class="st"> </span><span class="cf">function</span>(object, predictors) {</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb13-3" data-line-number="3">  coefs &lt;-<span class="st"> </span>object<span class="op">$</span>coefs</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb13-5" data-line-number="5">  .pred &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/vector">as.vector</a></span>(predictors <span class="op">%*%</span><span class="st"> </span>coefs)</a>
<a class="sourceLine" id="cb13-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb13-7" data-line-number="7">  out &lt;-<span class="st"> </span><span class="kw"><a href="../reference/spruce.html">spruce_response</a></span>(.pred)</a>
<a class="sourceLine" id="cb13-8" data-line-number="8">  </a>
<a class="sourceLine" id="cb13-9" data-line-number="9">  out</a>
<a class="sourceLine" id="cb13-10" data-line-number="10">}</a></code></pre></div>
<p>To test it, we will have to do some of the work that will be done automatically by the higher level prediction helpers.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">model &lt;-<span class="st"> </span><span class="kw">simple_lm</span>(Sepal.Width <span class="op">~</span><span class="st"> </span>Sepal.Length <span class="op">+</span><span class="st"> </span>Species, iris)</a>
<a class="sourceLine" id="cb14-2" data-line-number="2"></a>
<a class="sourceLine" id="cb14-3" data-line-number="3">predictors &lt;-<span class="st"> </span><span class="kw"><a href="../reference/forge.html">forge</a></span>(iris, model<span class="op">$</span>engine)<span class="op">$</span>predictors</a>
<a class="sourceLine" id="cb14-4" data-line-number="4">predictors &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">as.matrix</a></span>(predictors)</a>
<a class="sourceLine" id="cb14-5" data-line-number="5"></a>
<a class="sourceLine" id="cb14-6" data-line-number="6"><span class="kw">predict_simple_lm_response</span>(model, predictors)</a>
<a class="sourceLine" id="cb14-7" data-line-number="7"><span class="co">#&gt; # A tibble: 150 x 1</span></a>
<a class="sourceLine" id="cb14-8" data-line-number="8"><span class="co">#&gt;    .pred</span></a>
<a class="sourceLine" id="cb14-9" data-line-number="9"><span class="co">#&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb14-10" data-line-number="10"><span class="co">#&gt;  1  3.46</span></a>
<a class="sourceLine" id="cb14-11" data-line-number="11"><span class="co">#&gt;  2  3.39</span></a>
<a class="sourceLine" id="cb14-12" data-line-number="12"><span class="co">#&gt;  3  3.32</span></a>
<a class="sourceLine" id="cb14-13" data-line-number="13"><span class="co">#&gt;  4  3.29</span></a>
<a class="sourceLine" id="cb14-14" data-line-number="14"><span class="co">#&gt;  5  3.43</span></a>
<a class="sourceLine" id="cb14-15" data-line-number="15"><span class="co">#&gt;  6  3.57</span></a>
<a class="sourceLine" id="cb14-16" data-line-number="16"><span class="co">#&gt;  7  3.29</span></a>
<a class="sourceLine" id="cb14-17" data-line-number="17"><span class="co">#&gt;  8  3.43</span></a>
<a class="sourceLine" id="cb14-18" data-line-number="18"><span class="co">#&gt;  9  3.22</span></a>
<a class="sourceLine" id="cb14-19" data-line-number="19"><span class="co">#&gt; 10  3.39</span></a>
<a class="sourceLine" id="cb14-20" data-line-number="20"><span class="co">#&gt; # … with 140 more rows</span></a></code></pre></div>
</div>
<div id="prediction-wrapper" class="section level2">
<h2 class="hasAnchor">
<a href="#prediction-wrapper" class="anchor"></a>Prediction Wrapper</h2>
<p>A prediction wrapper converts the standardized <code>predictors</code> into the lower level type that the prediction implemenation function might expect. <code>predictors</code> here is always a data frame, and is part of the return value of a call to <code><a href="../reference/forge.html">forge()</a></code>.</p>
<p>Additionally, it should <code><a href="https://www.rdocumentation.org/packages/base/topics/switch">switch()</a></code> on the <code>type</code> argument to decide which of the prediction implementation functions to call. Here, when <code>type == "response"</code>, the <code>predict_simple_lm_response()</code> function is called.</p>
<p>I also like using <code><a href="https://rlang.r-lib.org/reference/arg_match.html">rlang::arg_match()</a></code> to validate that <code>type</code> is one of the accepted prediction types. This has the advantage over <code><a href="https://www.rdocumentation.org/packages/base/topics/match.arg">match.arg()</a></code> in that partial matches are not allowed, and the error messages are a bit nicer.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1">predict_simple_lm_wrapper &lt;-<span class="st"> </span><span class="cf">function</span>(type, object, predictors) {</a>
<a class="sourceLine" id="cb15-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb15-3" data-line-number="3">  type &lt;-<span class="st"> </span>rlang<span class="op">::</span><span class="kw"><a href="https://rlang.r-lib.org/reference/arg_match.html">arg_match</a></span>(type, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"response"</span>))</a>
<a class="sourceLine" id="cb15-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb15-5" data-line-number="5">  predictors &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/matrix">as.matrix</a></span>(predictors)</a>
<a class="sourceLine" id="cb15-6" data-line-number="6">  </a>
<a class="sourceLine" id="cb15-7" data-line-number="7">  <span class="cf">switch</span>(</a>
<a class="sourceLine" id="cb15-8" data-line-number="8">    type,</a>
<a class="sourceLine" id="cb15-9" data-line-number="9">    <span class="dt">response =</span> <span class="kw">predict_simple_lm_response</span>(object, predictors)</a>
<a class="sourceLine" id="cb15-10" data-line-number="10">  )</a>
<a class="sourceLine" id="cb15-11" data-line-number="11">}</a></code></pre></div>
<p>Let’s test:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">model &lt;-<span class="st"> </span><span class="kw">simple_lm</span>(Sepal.Width <span class="op">~</span><span class="st"> </span>Sepal.Length <span class="op">+</span><span class="st"> </span>Species, iris)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"></a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co"># Pass in the data frame</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4">predictors &lt;-<span class="st"> </span><span class="kw"><a href="../reference/forge.html">forge</a></span>(iris, model<span class="op">$</span>engine)<span class="op">$</span>predictors</a>
<a class="sourceLine" id="cb16-5" data-line-number="5"></a>
<a class="sourceLine" id="cb16-6" data-line-number="6"><span class="kw">predict_simple_lm_wrapper</span>(<span class="st">"response"</span>, model, predictors)</a>
<a class="sourceLine" id="cb16-7" data-line-number="7"><span class="co">#&gt; # A tibble: 150 x 1</span></a>
<a class="sourceLine" id="cb16-8" data-line-number="8"><span class="co">#&gt;    .pred</span></a>
<a class="sourceLine" id="cb16-9" data-line-number="9"><span class="co">#&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb16-10" data-line-number="10"><span class="co">#&gt;  1  3.46</span></a>
<a class="sourceLine" id="cb16-11" data-line-number="11"><span class="co">#&gt;  2  3.39</span></a>
<a class="sourceLine" id="cb16-12" data-line-number="12"><span class="co">#&gt;  3  3.32</span></a>
<a class="sourceLine" id="cb16-13" data-line-number="13"><span class="co">#&gt;  4  3.29</span></a>
<a class="sourceLine" id="cb16-14" data-line-number="14"><span class="co">#&gt;  5  3.43</span></a>
<a class="sourceLine" id="cb16-15" data-line-number="15"><span class="co">#&gt;  6  3.57</span></a>
<a class="sourceLine" id="cb16-16" data-line-number="16"><span class="co">#&gt;  7  3.29</span></a>
<a class="sourceLine" id="cb16-17" data-line-number="17"><span class="co">#&gt;  8  3.43</span></a>
<a class="sourceLine" id="cb16-18" data-line-number="18"><span class="co">#&gt;  9  3.22</span></a>
<a class="sourceLine" id="cb16-19" data-line-number="19"><span class="co">#&gt; 10  3.39</span></a>
<a class="sourceLine" id="cb16-20" data-line-number="20"><span class="co">#&gt; # … with 140 more rows</span></a>
<a class="sourceLine" id="cb16-21" data-line-number="21"></a>
<a class="sourceLine" id="cb16-22" data-line-number="22"><span class="co"># Partial matches are an error</span></a>
<a class="sourceLine" id="cb16-23" data-line-number="23"><span class="kw">predict_simple_lm_wrapper</span>(<span class="st">"resp"</span>, model, predictors)</a>
<a class="sourceLine" id="cb16-24" data-line-number="24"><span class="co">#&gt; Error: `type` should be one of: "response"</span></a>
<a class="sourceLine" id="cb16-25" data-line-number="25"><span class="co">#&gt; Did you mean "response"?</span></a></code></pre></div>
</div>
<div id="user-facing-prediction-function" class="section level2">
<h2 class="hasAnchor">
<a href="#user-facing-prediction-function" class="anchor"></a>User Facing Prediction Function</h2>
<p>Finally, we can create an S3 method for the generic <code><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict()</a></code> function from the stats package. To match the modeling principles, it should use <code>new_data</code> to accept a matrix or data frame of new predictors.</p>
<p>The first thing that the <code><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict()</a></code> method should do is call <code><a href="../reference/forge.html">forge()</a></code> with the <code>new_data</code> and the <code>engine</code> that we attached to our <code>simple_lm</code> model at fit time. This performs the required preprocessing on the new data, and checks that the <em>type</em> of the data frame supplied to <code>new_data</code> matches the type of data frame supplied at fit time.</p>
<p>After calling <code><a href="../reference/forge.html">forge()</a></code>, it should pass off to the prediction wrapper to call the correct prediction function based on the type.</p>
<p>Finally, it is good practice to call the hardhat function, <code><a href="../reference/validate_prediction_size.html">validate_prediction_size()</a></code> with the return value and the original <code>new_data</code> to ensure that the number of rows in the output are the same as the number of rows of the input. If a prediction cannot be made for a row of <code>new_data</code>, an <code>NA</code> value should be placed there instead.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">predict.simple_lm &lt;-<span class="st"> </span><span class="cf">function</span>(object, new_data, <span class="dt">type =</span> <span class="st">"response"</span>, ...) {</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">  </a>
<a class="sourceLine" id="cb17-3" data-line-number="3">  <span class="co"># Enforces column order, type, column names, etc</span></a>
<a class="sourceLine" id="cb17-4" data-line-number="4">  processed &lt;-<span class="st"> </span><span class="kw"><a href="../reference/forge.html">forge</a></span>(new_data, object<span class="op">$</span>engine)</a>
<a class="sourceLine" id="cb17-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb17-6" data-line-number="6">  out &lt;-<span class="st"> </span><span class="kw">predict_simple_lm_wrapper</span>(type, object, processed<span class="op">$</span>predictors)</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">  </a>
<a class="sourceLine" id="cb17-8" data-line-number="8">  <span class="kw"><a href="../reference/validate_prediction_size.html">validate_prediction_size</a></span>(out, new_data)</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">  </a>
<a class="sourceLine" id="cb17-10" data-line-number="10">  out</a>
<a class="sourceLine" id="cb17-11" data-line-number="11">}</a></code></pre></div>
</div>
<div id="final-testing" class="section level2">
<h2 class="hasAnchor">
<a href="#final-testing" class="anchor"></a>Final Testing</h2>
<p>Finally, we can test out our top level modeling function along with its corresponding <code><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict()</a></code> method.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">model &lt;-<span class="st"> </span><span class="kw">simple_lm</span>(Sepal.Width <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Log">log</a></span>(Sepal.Length) <span class="op">+</span><span class="st"> </span>Species, iris)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, iris)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4"><span class="co">#&gt; # A tibble: 150 x 1</span></a>
<a class="sourceLine" id="cb18-5" data-line-number="5"><span class="co">#&gt;    .pred</span></a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">#&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="co">#&gt;  1  3.47</span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt;  2  3.39</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">#&gt;  3  3.29</span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co">#&gt;  4  3.25</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="co">#&gt;  5  3.43</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="co">#&gt;  6  3.60</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="co">#&gt;  7  3.25</span></a>
<a class="sourceLine" id="cb18-14" data-line-number="14"><span class="co">#&gt;  8  3.43</span></a>
<a class="sourceLine" id="cb18-15" data-line-number="15"><span class="co">#&gt;  9  3.15</span></a>
<a class="sourceLine" id="cb18-16" data-line-number="16"><span class="co">#&gt; 10  3.39</span></a>
<a class="sourceLine" id="cb18-17" data-line-number="17"><span class="co">#&gt; # … with 140 more rows</span></a></code></pre></div>
<p>By using <code><a href="../reference/forge.html">forge()</a></code>, you automatically get powerful type checking to ensure that the <code>new_data</code> is in a form that you expect.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># new_data isn't a data frame</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, iris<span class="op">$</span>Species)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="co">#&gt; Error: The class of `new_data`, 'factor', is not recognized.</span></a>
<a class="sourceLine" id="cb19-4" data-line-number="4"></a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co"># missing a required column</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/subset">subset</a></span>(iris, <span class="dt">select =</span> <span class="op">-</span>Sepal.Length))</a>
<a class="sourceLine" id="cb19-7" data-line-number="7"><span class="co">#&gt; Error: The following required columns are missing: 'Sepal.Length'.</span></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"></a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co"># 'Species' is a character, but can be losslessy converted to a factor</span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="co"># so that happens for you automatically and silently.</span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11">iris_chr_species &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/transform">transform</a></span>(iris, <span class="dt">Species =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/character">as.character</a></span>(Species))</a>
<a class="sourceLine" id="cb19-12" data-line-number="12"></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, iris_chr_species)</a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="co">#&gt; # A tibble: 150 x 1</span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="co">#&gt;    .pred</span></a>
<a class="sourceLine" id="cb19-16" data-line-number="16"><span class="co">#&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="co">#&gt;  1  3.47</span></a>
<a class="sourceLine" id="cb19-18" data-line-number="18"><span class="co">#&gt;  2  3.39</span></a>
<a class="sourceLine" id="cb19-19" data-line-number="19"><span class="co">#&gt;  3  3.29</span></a>
<a class="sourceLine" id="cb19-20" data-line-number="20"><span class="co">#&gt;  4  3.25</span></a>
<a class="sourceLine" id="cb19-21" data-line-number="21"><span class="co">#&gt;  5  3.43</span></a>
<a class="sourceLine" id="cb19-22" data-line-number="22"><span class="co">#&gt;  6  3.60</span></a>
<a class="sourceLine" id="cb19-23" data-line-number="23"><span class="co">#&gt;  7  3.25</span></a>
<a class="sourceLine" id="cb19-24" data-line-number="24"><span class="co">#&gt;  8  3.43</span></a>
<a class="sourceLine" id="cb19-25" data-line-number="25"><span class="co">#&gt;  9  3.15</span></a>
<a class="sourceLine" id="cb19-26" data-line-number="26"><span class="co">#&gt; 10  3.39</span></a>
<a class="sourceLine" id="cb19-27" data-line-number="27"><span class="co">#&gt; # … with 140 more rows</span></a>
<a class="sourceLine" id="cb19-28" data-line-number="28"></a>
<a class="sourceLine" id="cb19-29" data-line-number="29"><span class="co"># 'Species' is a character, AND has an extra level. It is removed with a warning.</span></a>
<a class="sourceLine" id="cb19-30" data-line-number="30"><span class="co"># but you still get a factor with the correct levels</span></a>
<a class="sourceLine" id="cb19-31" data-line-number="31">iris_chr_bad_species &lt;-<span class="st"> </span>iris_chr_species</a>
<a class="sourceLine" id="cb19-32" data-line-number="32">iris_chr_bad_species<span class="op">$</span>Species[<span class="dv">1</span>] &lt;-<span class="st"> "new_level"</span></a>
<a class="sourceLine" id="cb19-33" data-line-number="33"></a>
<a class="sourceLine" id="cb19-34" data-line-number="34"><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, iris_chr_bad_species)</a>
<a class="sourceLine" id="cb19-35" data-line-number="35"><span class="co">#&gt; Warning: Lossy cast from &lt;character&gt; to &lt;factor&lt;12d60&gt;&gt;.</span></a>
<a class="sourceLine" id="cb19-36" data-line-number="36"><span class="co">#&gt; Locations: 1</span></a>
<a class="sourceLine" id="cb19-37" data-line-number="37"><span class="co">#&gt; # A tibble: 150 x 1</span></a>
<a class="sourceLine" id="cb19-38" data-line-number="38"><span class="co">#&gt;    .pred</span></a>
<a class="sourceLine" id="cb19-39" data-line-number="39"><span class="co">#&gt;    &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb19-40" data-line-number="40"><span class="co">#&gt;  1 NA   </span></a>
<a class="sourceLine" id="cb19-41" data-line-number="41"><span class="co">#&gt;  2  3.39</span></a>
<a class="sourceLine" id="cb19-42" data-line-number="42"><span class="co">#&gt;  3  3.29</span></a>
<a class="sourceLine" id="cb19-43" data-line-number="43"><span class="co">#&gt;  4  3.25</span></a>
<a class="sourceLine" id="cb19-44" data-line-number="44"><span class="co">#&gt;  5  3.43</span></a>
<a class="sourceLine" id="cb19-45" data-line-number="45"><span class="co">#&gt;  6  3.60</span></a>
<a class="sourceLine" id="cb19-46" data-line-number="46"><span class="co">#&gt;  7  3.25</span></a>
<a class="sourceLine" id="cb19-47" data-line-number="47"><span class="co">#&gt;  8  3.43</span></a>
<a class="sourceLine" id="cb19-48" data-line-number="48"><span class="co">#&gt;  9  3.15</span></a>
<a class="sourceLine" id="cb19-49" data-line-number="49"><span class="co">#&gt; 10  3.39</span></a>
<a class="sourceLine" id="cb19-50" data-line-number="50"><span class="co">#&gt; # … with 140 more rows</span></a>
<a class="sourceLine" id="cb19-51" data-line-number="51"></a>
<a class="sourceLine" id="cb19-52" data-line-number="52"><span class="co"># 'Species' is a double</span></a>
<a class="sourceLine" id="cb19-53" data-line-number="53"><span class="co"># Can't cast a double to a factor!</span></a>
<a class="sourceLine" id="cb19-54" data-line-number="54">iris_dbl_species &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/transform">transform</a></span>(iris, <span class="dt">Species =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb19-55" data-line-number="55"></a>
<a class="sourceLine" id="cb19-56" data-line-number="56"><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/predict">predict</a></span>(model, iris_dbl_species)</a>
<a class="sourceLine" id="cb19-57" data-line-number="57"><span class="co">#&gt; Error: Can't cast &lt;double&gt; to &lt;factor&lt;12d60&gt;&gt;</span></a></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#whats-our-model">What’s Our Model?</a></li>
      <li><a href="#model-constructor">Model Constructor</a></li>
      <li><a href="#model-implementation">Model Implementation</a></li>
      <li><a href="#model-wrapper">Model Wrapper</a></li>
      <li><a href="#user-facing-fitting-function">User Facing Fitting Function</a></li>
      <li><a href="#adding-an-intercept-option">Adding an Intercept Option</a></li>
      <li><a href="#prediction-implementation-functions">Prediction Implementation Functions</a></li>
      <li><a href="#prediction-wrapper">Prediction Wrapper</a></li>
      <li><a href="#user-facing-prediction-function">User Facing Prediction Function</a></li>
      <li><a href="#final-testing">Final Testing</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Davis Vaughan, Max Kuhn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
